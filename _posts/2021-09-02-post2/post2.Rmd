---
title: "BlOG 2. COVID-19 Situation in Philippine"
description: |
  There are two sections in the this blog. In part a, we will be expoloring the COVID-19 situation in the Philipine by first looking at it's total number of cases of postive and death cases. Following by analysis on the number of vacinnation rate in the Philipine in part b. 
author:
  - name: Qin Xu
    url: {}
date: 09-02-2021
output:
  distill::distill_article:
    self_contained: false
    theme: theme.css
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, eval = TRUE, message = FALSE, warning = FALSE)
```

```{r library}
library(tidyverse)
library(gt)
library(formattable)
library(here)
library(kableExtra)
library(ggplot2)
library(plotly)
library(lubridate)
library(dplyr)
library(shiny)
library(here)
library(knitr)
library(lubridate)
library(colorspace)
library(GGally)

```


# Introduction

![image sourced from: https://data.gov.ie/blog/coronavirus-covid-19](https://data.gov.ie/uploads/page_images/2020-03-23-125654.327394covid-19-coronavirus-photo-illustration-with-copyspace-.jpg)

Toward the end of 2019, the COVID-19 outbreak started in the Wuhan China and has been spreading rapidly around the world, forming a serious threat to the global public health system. The virus itself is a form of coronavirus that can lead to serious repiratory infections such as fever, dry cough, sore throat, and chest pain. As the world face such unprecedent challenge, the virus continues to mutate with increasing number of positive cases and deaths seen in countries around the world.

![image sourced from:https://www.theguardian.com/world/2020/jun/09/global-report-philippines-says-schools-wont-reopen-until-there-is-a-covid-19-vaccine](https://i.guim.co.uk/img/media/99c20de39c94f154ae32c330a041a396180bc7db/0_0_2250_1350/master/2250.jpg?width=620&quality=45&auto=format&fit=max&dpr=2&s=e30aca973e905f6d25227d02dad25435)


In this blog, we will be looking at the COVID 19 situation in the Philippine by first, examining the death and postive cases currently in the philippine. Second, see the relationship between the vaccination and the number of death in the philippines

# Data Description 

To conduct the data analysis on COVID-19 situation in the Philippine,  the data set(owid-covid-data.csv) was used. The dataset are provided our world in data with the original data sourced from  the COVID-19 Data Repository by the Center for Systems Science and Engineering (CSSE) at Johns Hopkins University (JHU).No data wrangling and data tidy was conducted as the datasets have already been tided when sourced. 


# Part A. COVID-19 situation in the Philippine 


In this section, we will take a deep look into the the covid-19 situation in the philippine by looking at its daily increase. 

```{r read_data}
data <- read.csv(here::here("data/owid-covid-data.csv"))
```

```{r philippine data}
Philippine <- data %>% 
  select (c("date",
           "total_cases",
           "new_cases",
           "total_deaths",
           "new_deaths",
           "new_tests",
           "total_tests",
           "location")) %>% 
  filter(location == "Philippines")
```

```{r table2}
Philippine <- data %>% 
  select (c("date",
           "total_cases",
           "new_cases",
           "total_deaths",
           "new_deaths",
           "new_tests",
           "total_tests",
           "location",
           "population")) %>% 
  filter(location == "Philippines") %>% 
  mutate(date = as.Date(date)) 
  
table2 <- Philippine %>% 
  filter(date == "2021-08-29") %>% 
  mutate(mortality_rate = sum(total_deaths/population*100)
         %>% 
           round(.,2),
         fatality_rate = sum(total_deaths/total_cases*100)
         %>% 
             round(.,2)                   ,
         avg_cases_daily = sum(total_cases/730) %>% 
           round(.,0),
        avg_deaths_daily = sum(total_deaths/730) %>% 
          round(.,0)) %>% 
        select(-c("new_cases",
                  "new_deaths",
                  "location",
                  "new_tests",
                  "population",
                  "date")) %>% 
  rename("total cases" = total_cases,
         "total deaths" = total_deaths,
         "mortality rate" = mortality_rate,
         "fatality rate" = fatality_rate ,
          "avg cases daily" = avg_cases_daily,
           "avg deaths daily" = avg_deaths_daily) 
knitr::kable ( table2,caption = "Table summary of the COVID-19 situation in the Philippine by 29th of August 2021") %>% kable_styling() %>% 
   column_spec(4, width = "18em")
```

 A sumamry table has been provided above. 
 
From the table, we can see that by August 29th 2021, the total number of cases for the philippine has arrived to 1954023,  with 33109 deaths. What seems shocking in this data is that on average since the pandemic has started,  there is on average 2677 number of positive cases  and 45 number of covid-19 death everyday. 

```{r cases_Data}
cases <- Philippine %>% 
  select (c( "total_cases",
           "new_cases",
           "date",
          "location")) %>% 
  mutate(date = as.Date(date)) %>% 
  relocate(date,.before = total_cases)
```

```{r parta_plot1}
plot1<- ggplot(data = cases, 
                      aes(x = date,
                          y= new_cases,
                          )) +
    geom_line(stat = "identity", size = 0.5,colour = "#FF9999") +
  geom_point(size = 0.3, colour = "#FF9999") +
    ggtitle("Daily number of COVID-19 confirm cases in the Philippine from 2020-2021") +
  xlab("Date") + 
  ylab("Daily new cases in Japan") +
   scale_colour_brewer(palette = "Set1") +
  theme_minimal()


p<- ggplotly(plot1)
p
```

From the plot, we can see that the daily number of new positive cases in the Philippine seem to exhibit a increasing trend with three peaks on the 10th of august 2020 (with 6,725 new daily cases),  2nd of April 2021 (with 15,298 new daily cases), 30th of August (with 22,179 new daily cases). This indicates that the situation in the Philippine are not in the posstive light as the number daily cases continue to increase. The increase in the number of posotive cases could potentially be fuelled by the Delta Variant that is currently taking a rampage around the globe due to its strong tramissibility. 

```{r death_Data}
deaths <- Philippine %>% 
  select (c( "total_deaths",
           "new_deaths",
           "date",
          "location")) %>% 
  mutate(date = as.Date(date)) %>% 
  relocate(date,.before = total_deaths)
```

```{r parta_ plot2}
plot2<- ggplot(data = deaths, 
                      aes(x = date,
                          y= new_deaths,
                          )) +
    geom_line(stat = "identity", size = 0.5,colour = "#FF9999") +
  geom_point(size = 0.3, colour = "#FF9999") +
    ggtitle("Daily number of COVID-19 deaths in the Philippine from 2020-2021") +
  xlab("Date") + 
  ylab("Daily new cases in Japan") +
   scale_colour_brewer(palette = "Set1") +
  theme_minimal()


p2<- ggplotly(plot2)
p2
```

In the above plot, we see that there is alot of flutuation from the July of 2020 to July 2021. However, it is clear that compared to 2020, the number of daily deaths cause by covid has significantly increased, with the daily number of deaths peaking at 401 in 2021 as compared to the 259 deaths in the peak for 2020. Again, suggestng that the covid-19 situation in the Philippine continue to worsening and pose a serious threat to the public heath system and its people in the Philippine. 

**Conclusion**
From the above analysis we can conclude that Even after a almost two years since the COVID-19 pandemic started, it continues to spread across the  Philippine at an increasing rate (due to multiple of different covid-19 mutate variant such as delta and mu) that led to rapid surge in both the number of positive and number of deaths. 

# Part B. Vaccination effect on the death caused by COVID-19 

```{r vaccinatio_data}
Philippine_v <- data %>% 
  select (c("date",
           "total_cases",
           "new_cases",
           "total_deaths",
           "new_deaths",
           "new_tests",
           "total_tests",
           "people_vaccinated",
           "people_fully_vaccinated",
           "location",
           "population")) %>% 
  filter(location == "Philippines")
```


```{r}
vac_1 <- Philippine_v %>% 
  select (c(  "people_vaccinated",
           "date")) %>% 
  mutate(date = as.Date(date)) %>% 
  relocate(date,.before = people_vaccinated) %>% 
  rename(number = people_vaccinated )

vac_2 <- Philippine_v %>% 
  select (c("people_fully_vaccinated",
           "date")) %>% 
  mutate(date = as.Date(date)) %>% 
  relocate(date,.before = people_fully_vaccinated)  %>% 
    rename(number = people_fully_vaccinated) 

vector1 <- c("People vaccinated")
vector2 <- c("People fully vaccinated")
vac_1_1<-data.frame(Type = vector1, vac_1)
vac_2_2<-data.frame(Type = vector2,vac_2)

combine <- rbind(vac_1_1,vac_2_2) %>% 
filter(!is.na(number))
```

```{r plot1}

v_plot1 <- ggplot(combine, aes(date, number)) + 
  geom_line(data = dplyr::select(combine, -Type), color = "gray", stat = "identity") + 
  geom_line(aes(color = Type)) +
  labs( x = "Date",
        y = "Number of vaccination",
        title = "Number of vaccination in the Philippine" ,
        subtitle = "Comparison of the number of people who had their first dose of vaccination and the number of fully vaccination") +
  facet_wrap(~Type)+ 
  scale_color_discrete_qualitative() + 
  guides(color = FALSE)

v <- ggplotly(v_plot1)
v
```

```{r table1}
table1 <- combine %>% 
  filter(date == "2021-08-29" | date == "2021-08-15") %>% 
  group_by(date, Type) %>% 
mutate ( population = c(111046910))

table1<- table1 %>% 
  mutate(percentage = sum(number/population*100))

table1$percentage<- round (table1$percentage,2)

knitr::kable ( table1,caption = "The percentage of vaccination rate in the Philippine by 2021 August") %>% kable_styling()
```

### Now lets have a look on the association between the vacinnation and covid deaths. 


```{r combine1}
vac_3 <- Philippine_v %>% 
  select (c(  "total_deaths",
              "people_vaccinated",
               "total_cases",
           "date")) %>% 
  mutate(date = as.Date(date)) %>% 
  relocate(date,.before = total_deaths) %>% 
  rename(number = people_vaccinated )

vac_4 <- Philippine_v %>% 
  select (c("people_fully_vaccinated",
            "total_deaths",
             "total_cases",
           "date")) %>% 
  mutate(date = as.Date(date)) %>% 
  relocate(date,.before = total_deaths)  %>% 
    rename(number = people_fully_vaccinated) 

vector3 <- c("People vaccinated")
vector4 <- c("People fully vaccinated")
vac_3_3<-data.frame(Type = vector3, vac_3)
vac_4_4<-data.frame(Type = vector4,vac_4)

combine1 <- rbind(vac_3_3,vac_4_4) %>% 
filter(!is.na(number)) %>% 
  mutate(Type = as.factor(Type))

```
  

```{r plot4}
association_p <- 
  ggplot( data = combine1 ,aes(x = date,
          y = number ,
          colour = total_cases,
          shape = factor (Type)) )  +
  geom_point(size = 0.8) +  
  labs (
title = "Association between the number of deaths and vaccination",
  x = "Total number of people fully vaccinated",
  y = "Total deaths",
  color = "Number of cases",
  shape   = "Type" ) +
  scale_color_continuous_sequential(palette = "Terrain") +
  scale_shape_discrete(labels = c("Full vaccination", "At least 1 dose of vaccination")) + 
  theme (text = element_text(colour = "black"),
        rect = element_rect(fill = "wheat2"),
        panel.background = element_rect(fill = "wheat2"))
  association_p 
  
a <- ggplotly(association_p)
a

```




